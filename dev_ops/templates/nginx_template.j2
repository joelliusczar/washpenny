server {
	listen [::]:80;
	server_name {{server_name}};

	return 301 https://$host$request_uri;
}

server {
	listen {{listen}};

	#should be the public key
	ssl_certificate {{cert_files["public"]}};

	#should be the private key
	ssl_certificate_key {{cert_files["private"]}};

	#should be the intermediate key if relevant
	#apparently this isn't needed anymore with porkbun?
	#ssl_trusted_certificate <ssl_intermediate>;

	client_max_body_size 0;


	location / {
		root {{serve_dir}};
		try_files $uri /index.html =404;

		location /what-is-robot-reading {
			try_files /what_is_robot_reading/index.html =404;
		}
	}
	server_name {{server_name}};
}
